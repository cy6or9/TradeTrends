<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeTrends - Stock Market Analyst</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: cyan;
        }
        .stock-list {
            list-style: none;
            padding: 0;
        }
        .stock-item {
            background: #1e1e1e;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .favorite {
            color: cyan;
            cursor: pointer;
        }
        .news {
            margin-top: 20px;
        }
        .news-item {
            background: #1e1e1e;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
        .news-item a {
            color: cyan;
            text-decoration: none;
        }
        .ai-section {
            margin-top: 20px;
            padding: 15px;
            background: #1e1e1e;
            border-radius: 5px;
        }
        .ai-input {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>TradeTrends</h1>

        <!-- Stock List -->
        <h2>Top Stocks</h2>
        <ul class="stock-list" id="stockList"></ul>

        <!-- Stock News -->
        <div class="news">
            <h2>Latest Stock News</h2>
            <div id="newsContainer"></div>
        </div>

        <!-- AI Assistant -->
        <div class="ai-section">
            <h2>Ask TradeTrends AI</h2>
            <p><i>Example: Which stock under $0.20, based on analyst ratings, is set to make a significant gain this quarter?</i></p>
            <input type="text" class="ai-input" placeholder="Ask a stock-related question..." id="aiQuestion">
            <button onclick="askAI()">Ask</button>
            <p id="aiResponse"></p>
        </div>
    </div>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

  Firebase-config : 
// Your web app's Firebase configuration

// For Firebase JS SDK v7.20.0 and later, measurementId is optional

const firebaseConfig = {
  apiKey: "AIzaSyAUU-nZOb6jP1KgDAodB3c_PK7VLmFFdcc",
  authDomain: "tradetrends-89a9d.firebaseapp.com",
  projectId: "tradetrends-89a9d",
  storageBucket: "tradetrends-89a9d.firebasestorage.app",
  messagingSenderId: "990950180616",
  appId: "1:990950180616:web:ddadabd319d9c188a78ebd",
  measurementId: "G-JP0GCH7QWZ"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function getAIResponse(question) {
    const docRef = doc(db, "ai_responses", "sample_question");
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      return docSnap.data().response;
    } else {
      return "No AI response available.";
    }
  }

  document.getElementById("askButton").addEventListener("click", async () => {
    const question = document.getElementById("questionInput").value;
    const response = await getAIResponse(question);
    document.getElementById("aiResponse").innerText = response;
  });
</script>
  
    <script>
        const FINNHUB_API_KEY = "cuvuc2hr01qub8tvmkrgcuvuc2hr01qub8tvmks0";

        document.addEventListener("DOMContentLoaded", function () {
            loadStocks();
            loadNews();
        });

        async function loadStocks() {
            const symbols = ["AAPL", "TSLA", "AMZN", "GOOGL", "MSFT"];
            const stockList = document.getElementById("stockList");
            stockList.innerHTML = "";

            for (const symbol of symbols) {
                try {
                    const response = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${cuvuc2hr01qub8tvmkrgcuvuc2hr01qub8tvmks0}`);
                    const data = await response.json();

                    if (data.c) {
                        const li = document.createElement("li");
                        li.className = "stock-item";
                        li.innerHTML = `
                            <span>${symbol} - $${data.c.toFixed(2)}</span>
                            <span class="favorite" onclick="toggleFavorite('${symbol}')">★</span>
                        `;
                        stockList.appendChild(li);
                    }
                } catch (error) {
                    console.error("Error fetching stock data:", error);
                }
            }
        }

        async function loadNews() {
            try {
                const response = await fetch(`https://finnhub.io/api/v1/news?category=general&token=${cuvuc2hr01qub8tvmkrgcuvuc2hr01qub8tvmks0}`);
                const newsData = await response.json();

                const newsContainer = document.getElementById("newsContainer");
                newsContainer.innerHTML = "";

                newsData.slice(0, 5).forEach(news => {
                    const div = document.createElement("div");
                    div.className = "news-item";
                    div.innerHTML = `<a href="${news.url}" target="_blank">${news.headline}</a>`;
                    newsContainer.appendChild(div);
                });
            } catch (error) {
                console.error("Error fetching news:", error);
            }
        }

        function toggleFavorite(symbol) {
            alert(symbol + " added to favorites!");
        }

        function askAI() {
            const aiQuestion = document.getElementById("aiQuestion").value;
            const aiResponse = document.getElementById("aiResponse");

            aiResponse.innerText = "AI is processing your request... (Connect Firebase AI here)";
        }
    </script>

</body>
</html>
