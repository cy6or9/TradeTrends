
> tradetrends@1.0.0 test
> npm run validate && npm run test:e2e


> tradetrends@1.0.0 validate
> node scripts/validate.js


ğŸ” TradeTrends Build Validation

ğŸ“„ Validating HTML files...

ğŸ“¦ Validating data files...
âœ… Valid JSON: public/data/amazon.json
âœ… Valid JSON: public/data/travel.json
  Found 14 Amazon deals
  Found 2 Travel deals

ğŸ¨ Validating assets...

âš™ï¸  Validating Netlify config...

âš¡ Validating serverless functions...

ğŸ”— Validating affiliate link routing...
âœ… Valid _redirects: /go routing enforced with 200! flags
âœ… Valid _redirects: /go rules appear BEFORE catch-all /*
âœ… Valid render.js: uses direct affiliate URLs with background tracking

ğŸ” Validating admin API routing (Identity bypass)...
âœ… public/admin/dashboard.html correctly uses /.netlify/functions/api paths
âœ… public/admin/trends.html correctly uses /.netlify/functions/api paths

Validating Direct Affiliate Navigation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… render.js uses direct affiliate URLs
âœ… render.js implements background click tracking
âœ… render.js does not use /go in primary navigation

ğŸ—ºï¸  Validating sitemap...
âœ… sitemap.xml validated

ğŸ¤– Validating AI memory system...
âœ… Valid JSON: .ai/business.json
âœ… Valid JSON: .ai/blocked-patterns.json
âœ… Valid JSON: .ai/known-good.json
âœ… Valid JSON: .ai/history.json
âœ… AI memory system validated

9ï¸âƒ£  Validating API Contracts
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Analytics API has strict input validation
âœ… Analytics API guarantees response contract
âœ… Analytics API has error handling
âœ… Dashboard has URL parameter sanitation
âœ… Dashboard has enhanced error handling
âœ… Trends page has error type detection

ğŸ”Ÿ Validating API Endpoint Routes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… public/admin/dashboard.html correctly bypasses Identity with direct function calls
âœ… public/admin/trends.html correctly bypasses Identity with direct function calls

1ï¸âƒ£1ï¸âƒ£  Validating Deal Status Model
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… public/data/amazon.json has valid deal data structure
âœ… public/data/travel.json has valid deal data structure
âœ… render.js correctly filters published-only deals

Validating /go Function Redirect Safety
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… go.js returns 302 with Location header
âœ… go.js implements redirect loop detection
âœ… go.js prevents self-redirect loops

ğŸ”§ Validating admin inline scripts...

ğŸ” Admin Scripts Sanity Check

â„¹ï¸ dashboard.html: Checking 3 inline script(s)...
âœ… dashboard.html [script #1] Valid
âœ… dashboard.html [script #2] Valid
âœ… dashboard.html [script #3] Valid
â„¹ï¸ trends.html: Checking 3 inline script(s)...
âœ… trends.html [script #1] Valid
âœ… trends.html [script #2] Valid
âœ… trends.html [script #3] Valid
â„¹ï¸ deals.html: Checking 2 inline script(s)...
âœ… deals.html [script #1] Valid
âœ… deals.html [script #2] Valid

ğŸ“Š Summary
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Errors: 0
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… All admin scripts are syntactically valid
âœ… All admin inline scripts are syntactically valid

Validating Emergency Kill Switch
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Emergency kill switch flags configured

Validating Deal Data for Self-Redirects (PHASE 8)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… No self-redirect URLs found in deal data

Validating Admin Pages for Scroll Lock Bug
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… No scroll lock bugs detected in admin pages
âœ… admin.css: body/html scroll enabled correctly

ğŸ“Š Validation Summary
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Errors:   0
Warnings: 0
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Build validation passed with no issues!

> tradetrends@1.0.0 test:e2e
> playwright test --reporter=line


Running 72 tests using 1 worker

[1A[2K[1/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:16:3 â€º Analytics Dashboard - Error Handling â€º dashboard handles uninitialized analytics gracefully
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:16:3 â€º Analytics Dashboard - Error Handling â€º dashboard handles uninitialized analytics gracefully
âœ… Dashboard handled analytics state without errors

[1A[2K[2/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:56:3 â€º Analytics Dashboard - Error Handling â€º dashboard displays empty state when no clicks recorded
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:56:3 â€º Analytics Dashboard - Error Handling â€º dashboard displays empty state when no clicks recorded
âœ… Dashboard rendered empty/initial state correctly

[1A[2K[3/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:86:3 â€º Analytics Dashboard - Error Handling â€º dashboard escapes HTML in deal IDs
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:86:3 â€º Analytics Dashboard - Error Handling â€º dashboard escapes HTML in deal IDs
âœ… Dashboard properly escapes user data

[1A[2K[4/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:104:3 â€º Analytics Dashboard - Error Handling â€º dashboard handles division by zero gracefully
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:104:3 â€º Analytics Dashboard - Error Handling â€º dashboard handles division by zero gracefully
âœ… Dashboard math calculations are safe

[1A[2K[5/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:132:3 â€º Analytics Dashboard - Error Handling â€º revenue health section loads without errors
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:132:3 â€º Analytics Dashboard - Error Handling â€º revenue health section loads without errors
âœ… Revenue health section loaded correctly

[1A[2K[6/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:159:3 â€º Analytics Dashboard - Error Handling â€º analytics API returns valid JSON structure
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:159:3 â€º Analytics Dashboard - Error Handling â€º analytics API returns valid JSON structure
âœ… Analytics API returns valid structure

[1A[2K[7/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:195:3 â€º Analytics Dashboard - Error Handling â€º dashboard does not get stuck in loading state
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:195:3 â€º Analytics Dashboard - Error Handling â€º dashboard does not get stuck in loading state
âœ… Dashboard exited loading state properly

[1A[2K[8/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:218:3 â€º Analytics Dashboard - Console Error Detection â€º no console errors on dashboard load
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:218:3 â€º Analytics Dashboard - Console Error Detection â€º no console errors on dashboard load
âœ… No critical console errors detected

[1A[2K[9/72] [chromium] â€º tests/e2e/admin.analytics-errors.spec.js:247:3 â€º Analytics Dashboard - Console Error Detection â€º no JavaScript exceptions thrown
[1A[2K[chromium] â€º tests/e2e/admin.analytics-errors.spec.js:247:3 â€º Analytics Dashboard - Console Error Detection â€º no JavaScript exceptions thrown
âœ… No JavaScript exceptions thrown

[1A[2K[10/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:16:3 â€º Analytics State Model â€º cold state shows waiting message, not error
[1A[2K[11/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:57:3 â€º Analytics State Model â€º broken state shows offline message
[1A[2K[12/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:78:3 â€º Analytics State Model â€º active state shows analytics with test click button
[1A[2K[13/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:123:3 â€º Analytics State Model â€º Generate Test Click button is clickable
[1A[2K[14/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:186:3 â€º Revenue Health Tests â€º HTTP 302 shows healthy status
[1A[2K[15/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:244:3 â€º Revenue Health Tests â€º HTML response shows redirect loop
[1A[2K[16/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:300:3 â€º Trends Empty State â€º empty trends array shows waiting message, not error
[1A[2K[17/72] [chromium] â€º tests/e2e/admin.analytics-state.spec.js:333:3 â€º Trends Empty State â€º trends fetch failure shows error
[1A[2K[18/72] [chromium] â€º tests/e2e/admin.scroll.spec.js:13:7 â€º Admin Pages - Scroll Health â€º Admin deals page is scrollable
[1A[2K[chromium] â€º tests/e2e/admin.scroll.spec.js:13:7 â€º Admin Pages - Scroll Health â€º Admin deals page is scrollable
Scroll info: {
  scrollHeight: [33m4227[39m,
  clientHeight: [33m720[39m,
  bodyOverflow: [32m'auto'[39m,
  bodyOverflowY: [32m'auto'[39m,
  htmlOverflow: [32m'auto'[39m,
  htmlOverflowY: [32m'auto'[39m,
  bodyHeight: [32m'720px'[39m,
  htmlHeight: [32m'720px'[39m
}

[1A[2Kâš ï¸ Page appears scrollable but scroll did not move - checking for CSS blockers

[1A[2Kâœ… Overflow is not hidden - scroll capability preserved

[1A[2Kâœ… Deals page scroll test passed

[1A[2K[19/72] [chromium] â€º tests/e2e/admin.scroll.spec.js:80:7 â€º Admin Pages - Scroll Health â€º Admin activities page is scrollable
[1A[2K[chromium] â€º tests/e2e/admin.scroll.spec.js:80:7 â€º Admin Pages - Scroll Health â€º Admin activities page is scrollable
Scroll info: {
  scrollHeight: [33m6683[39m,
  clientHeight: [33m720[39m,
  initialScroll: [33m0[39m,
  bodyOverflow: [32m'auto'[39m,
  bodyOverflowY: [32m'auto'[39m,
  htmlOverflow: [32m'auto'[39m,
  htmlOverflowY: [32m'auto'[39m
}

[1A[2Kâœ… Activities page scroll test passed

[1A[2K[20/72] [chromium] â€º tests/e2e/admin.scroll.spec.js:136:7 â€º Admin Pages - Scroll Health â€º Admin deals page does not have overflow:hidden on body
[1A[2K[chromium] â€º tests/e2e/admin.scroll.spec.js:136:7 â€º Admin Pages - Scroll Health â€º Admin deals page does not have overflow:hidden on body
âœ… No overflow:hidden on body/html

[1A[2K[21/72] [chromium] â€º tests/e2e/admin.scroll.spec.js:160:7 â€º Admin Pages - Scroll Health â€º Admin activities page does not have overflow:hidden on body
[1A[2K[chromium] â€º tests/e2e/admin.scroll.spec.js:160:7 â€º Admin Pages - Scroll Health â€º Admin activities page does not have overflow:hidden on body
âœ… No overflow:hidden on body/html

[1A[2K[22/72] [chromium] â€º tests/e2e/admin.scroll.spec.js:184:7 â€º Admin Pages - Scroll Health â€º Save section does not block scrolling
[1A[2K[chromium] â€º tests/e2e/admin.scroll.spec.js:184:7 â€º Admin Pages - Scroll Health â€º Save section does not block scrolling
âœ… Save section does not block scroll

[1A[2K[23/72] [chromium] â€º tests/e2e/admin.smoke.spec.js:15:3 â€º Admin Pages - Smoke Tests â€º dashboard.html loads and exits loading state
[1A[2K[chromium] â€º tests/e2e/admin.smoke.spec.js:15:3 â€º Admin Pages - Smoke Tests â€º dashboard.html loads and exits loading state
âœ… Dashboard exited loading state

[1A[2K[24/72] [chromium] â€º tests/e2e/admin.smoke.spec.js:36:3 â€º Admin Pages - Smoke Tests â€º trends.html loads and exits loading state
[1A[2K[chromium] â€º tests/e2e/admin.smoke.spec.js:36:3 â€º Admin Pages - Smoke Tests â€º trends.html loads and exits loading state
âœ… Trends page exited loading state

[1A[2K[25/72] [chromium] â€º tests/e2e/admin.smoke.spec.js:56:3 â€º Admin Pages - Smoke Tests â€º admin pages return JSON not HTML from API endpoints
[1A[2K[chromium] â€º tests/e2e/admin.smoke.spec.js:56:3 â€º Admin Pages - Smoke Tests â€º admin pages return JSON not HTML from API endpoints
âœ… Checked 2 API responses

[1A[2K[26/72] [chromium] â€º tests/e2e/card-layout.spec.js:16:3 â€º Card Layout and Button Alignment â€º all cards in shop section have equal heights
[1A[2K[27/72] [chromium] â€º tests/e2e/card-layout.spec.js:35:3 â€º Card Layout and Button Alignment â€º all cards in activities section have equal heights
[1A[2K[28/72] [chromium] â€º tests/e2e/card-layout.spec.js:54:3 â€º Card Layout and Button Alignment â€º action buttons are aligned at bottom of cards
[1A[2K[29/72] [chromium] â€º tests/e2e/card-layout.spec.js:75:3 â€º Card Layout and Button Alignment â€º share buttons are aligned at bottom of cards
[1A[2K[30/72] [chromium] â€º tests/e2e/card-layout.spec.js:99:3 â€º Card Interactivity with Hover Tooltip â€º can click primary CTA button when hovering over card
[1A[2K[31/72] [chromium] â€º tests/e2e/card-layout.spec.js:123:3 â€º Card Interactivity with Hover Tooltip â€º can click share button when hovering over card
[1A[2K[32/72] [chromium] â€º tests/e2e/card-layout.spec.js:150:3 â€º Card Interactivity with Hover Tooltip â€º hover tooltip does not block mouse events
[1A[2K[33/72] [chromium] â€º tests/e2e/card-layout.spec.js:190:3 â€º Scroll Bar Spacing â€º scroll bar has 0px gap from section header
[1A[2K[34/72] [chromium] â€º tests/e2e/card-layout.spec.js:213:3 â€º Scroll Bar Spacing â€º cards maintain equal height in carousel
[1A[2K[35/72] [chromium] â€º tests/e2e/card-layout.spec.js:234:3 â€º Responsive Card Layout â€º cards maintain equal heights on mobile viewport
[1A[2K[36/72] [chromium] â€º tests/e2e/card-layout.spec.js:252:3 â€º Responsive Card Layout â€º cards maintain equal heights on tablet viewport
[1A[2K[37/72] [chromium] â€º tests/e2e/home.carousels.spec.js:8:3 â€º Homepage Carousels â€º homepage loads and all carousel sections exist
[1A[2K[38/72] [chromium] â€º tests/e2e/home.carousels.spec.js:25:3 â€º Homepage Carousels â€º shop carousel right arrow scrolls content
[1A[2K  1) [chromium] â€º tests/e2e/home.carousels.spec.js:25:3 â€º Homepage Carousels â€º shop carousel right arrow scrolls content 

    [31mTest timeout of 30000ms exceeded.[39m

    Error: locator.click: Test timeout of 30000ms exceeded.
    Call log:
    [2m  - waiting for locator('.carousel-next[data-carousel="shop"]')[22m
    [2m    - locator resolved to <button disabled data-carousel="shop" aria-label="Next products" class="carousel-btn carousel-next">â€¦</button>[22m
    [2m  - attempting click action[22m
    [2m    2 Ã— waiting for element to be visible, enabled and stable[22m
    [2m      - element is not enabled[22m
    [2m    - retrying click action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible, enabled and stable[22m
    [2m      - element is not enabled[22m
    [2m    - retrying click action[22m
    [2m      - waiting 100ms[22m
    [2m    57 Ã— waiting for element to be visible, enabled and stable[22m
    [2m       - element is not enabled[22m
    [2m     - retrying click action[22m
    [2m       - waiting 500ms[22m


      31 |     
      32 |     // Click next button
    > 33 |     await nextBtn.click();
         |                   ^
      34 |     
      35 |     // Wait for scroll animation
      36 |     await page.waitForTimeout(400);
        at /workspaces/TradeTrends/tests/e2e/home.carousels.spec.js:33:19

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/home.carousels-Homepage-Ca-26eac-right-arrow-scrolls-content-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/home.carousels-Homepage-Ca-26eac-right-arrow-scrolls-content-chromium/error-context.md


[1A[2K[39/72] [chromium] â€º tests/e2e/home.carousels.spec.js:43:8 â€º Homepage Carousels â€º travel carousel navigation works - section removed from homepage
[1A[2K[40/72] [chromium] â€º tests/e2e/home.carousels.spec.js:63:3 â€º Homepage Carousels â€º activities carousel navigation works
[1A[2K[41/72] [chromium] â€º tests/e2e/home.carousels.spec.js:76:3 â€º Homepage Carousels â€º see more links exist and have correct URLs
[1A[2K[42/72] [chromium] â€º tests/e2e/home.carousels.spec.js:88:3 â€º Homepage Carousels â€º clicking see more shop navigates to full products page
[1A[2K[43/72] [chromium] â€º tests/e2e/home.carousels.spec.js:94:8 â€º Homepage Carousels â€º clicking see more travel navigates to full travel page - section removed
[1A[2K[44/72] [chromium] â€º tests/e2e/home.carousels.spec.js:100:3 â€º Homepage Carousels â€º clicking see more activities navigates to full activities page
[1A[2K[45/72] [chromium] â€º tests/e2e/home.carousels.spec.js:106:8 â€º Homepage Carousels â€º rentals section exists with proper elements - section removed from homepage
[1A[2K[46/72] [chromium] â€º tests/e2e/home.carousels.spec.js:120:8 â€º Homepage Carousels â€º rentals search button opens external URL with location - section removed
[1A[2K[47/72] [chromium] â€º tests/e2e/home.carousels.spec.js:148:8 â€º Homepage Carousels â€º rentals search without input shows hint - section removed
[1A[2K[48/72] [chromium] â€º tests/e2e/home.carousels.spec.js:160:3 â€º Homepage Carousels â€º carousel cards preserve affiliate links
[1A[2K[49/72] [chromium] â€º tests/e2e/home.carousels.spec.js:174:3 â€º Homepage Carousels â€º carousel cards have share buttons
[1A[2K[50/72] [chromium] â€º tests/e2e/home.carousels.spec.js:183:3 â€º Homepage Carousels â€º more menu toggle works
[1A[2K[51/72] [chromium] â€º tests/e2e/home.carousels.spec.js:199:3 â€º Homepage Carousels â€º header navigation uses anchor links
[1A[2K[52/72] [chromium] â€º tests/e2e/revenue.click.spec.js:15:3 â€º Revenue Canary - /go Redirect Flow â€º /go endpoint returns 302 with affiliate destination
[1A[2K[chromium] â€º tests/e2e/revenue.click.spec.js:15:3 â€º Revenue Canary - /go Redirect Flow â€º /go endpoint returns 302 with affiliate destination
âœ… /go redirect works: https://amzn.to/49hq7MW

[1A[2K[53/72] [chromium] â€º tests/e2e/revenue.click.spec.js:51:3 â€º Revenue Canary - /go Redirect Flow â€º deals have direct affiliate URL href
[1A[2K[chromium] â€º tests/e2e/revenue.click.spec.js:51:3 â€º Revenue Canary - /go Redirect Flow â€º deals have direct affiliate URL href
CTA href: https://amzn.to/45NG8rv

[1A[2KTrack URL: /.netlify/functions/api/click?network=amazon&id=64e2e9b3-e975-4f5e-9532-f694f2ba5b47&t=1768340815495

[1A[2Kâœ… Deal has direct affiliate URL and background tracking

[1A[2K[54/72] [chromium] â€º tests/e2e/revenue.click.spec.js:84:3 â€º Revenue Canary - /go Redirect Flow â€º clicking deal opens affiliate destination directly
[1A[2K[chromium] â€º tests/e2e/revenue.click.spec.js:84:3 â€º Revenue Canary - /go Redirect Flow â€º clicking deal opens affiliate destination directly
Deal link href: https://amzn.to/45NG8rv

[1A[2Kâœ… Deal uses direct affiliate URL: https://amzn.to/45NG8rv

[1A[2K[55/72] [chromium] â€º tests/e2e/revenue.click.spec.js:105:3 â€º Revenue Canary - /go Redirect Flow â€º redirect loop detector correctly identifies loops but allows normal clicks
[1A[2K[chromium] â€º tests/e2e/revenue.click.spec.js:105:3 â€º Revenue Canary - /go Redirect Flow â€º redirect loop detector correctly identifies loops but allows normal clicks
âœ… Loop detector does not interfere with normal redirects

[1A[2K[56/72] [chromium] â€º tests/e2e/revenue.click.spec.js:173:3 â€º Revenue Canary - /go Redirect Flow â€º background tracking endpoint exists
[1A[2K[chromium] â€º tests/e2e/revenue.click.spec.js:173:3 â€º Revenue Canary - /go Redirect Flow â€º background tracking endpoint exists
âœ… Background tracking is implemented

[1A[2K[57/72] [chromium] â€º tests/e2e/revenue.spec.js:22:3 â€º Revenue Protection - Affiliate Link Testing â€º Amazon affiliate link opens with /go or direct (D7 pattern)
[1A[2K[chromium] â€º tests/e2e/revenue.spec.js:22:3 â€º Revenue Protection - Affiliate Link Testing â€º Amazon affiliate link opens with /go or direct (D7 pattern)
Amazon button href: https://amzn.to/45NG8rv

[1A[2Kâœ… CTA link structure validated

[1A[2K[58/72] [chromium] â€º tests/e2e/revenue.spec.js:87:3 â€º Revenue Protection - Affiliate Link Testing â€º Travel affiliate link opens directly (no redirect loop)
[1A[2K[chromium] â€º tests/e2e/revenue.spec.js:87:3 â€º Revenue Protection - Affiliate Link Testing â€º Travel affiliate link opens directly (no redirect loop)
No travel deals found, skipping test

[1A[2K[59/72] [chromium] â€º tests/e2e/revenue.spec.js:156:3 â€º Revenue Protection - Affiliate Link Testing â€º /go function still works for legacy/shared links
[1A[2K[chromium] â€º tests/e2e/revenue.spec.js:156:3 â€º Revenue Protection - Affiliate Link Testing â€º /go function still works for legacy/shared links
Legacy /go redirect location: /

[1A[2K[60/72] [chromium] â€º tests/e2e/revenue.spec.js:173:3 â€º Revenue Protection - Affiliate Link Testing â€º Homepage has direct affiliate links (not /go redirects)
[1A[2K[chromium] â€º tests/e2e/revenue.spec.js:173:3 â€º Revenue Protection - Affiliate Link Testing â€º Homepage has direct affiliate links (not /go redirects)
Found 12 Amazon links, 0 Travel links

[1A[2K[61/72] [chromium] â€º tests/e2e/revenue.spec.js:200:3 â€º Revenue Protection - Affiliate Link Testing â€º Background click tracking endpoint works
[1A[2K[chromium] â€º tests/e2e/revenue.spec.js:200:3 â€º Revenue Protection - Affiliate Link Testing â€º Background click tracking endpoint works
Click tracking endpoint returned 204

[1A[2K[62/72] [chromium] â€º tests/e2e/revenue.spec.js:210:3 â€º Revenue Protection - Affiliate Link Testing â€º Affiliate links do NOT use /?network= pattern (old bug)
[1A[2K[63/72] [chromium] â€º tests/e2e/revenue.spec.js:220:8 â€º Revenue Protection - Affiliate Link Testing â€º Analytics records clicks correctly
[1A[2K[64/72] [chromium] â€º tests/e2e/revenue.spec.js:280:3 â€º Production Deployment Verification â€º Production /go function is live and working
[1A[2K[65/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:16:3 â€º Travel Guide Dashboard â€º /travelguide loads with no console errors
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:16:3 â€º Travel Guide Dashboard â€º /travelguide loads with no console errors
âœ… Travel guide loaded without errors

[1A[2K[66/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:38:3 â€º Travel Guide Dashboard â€º Trending Now section renders at least 3 cards
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:38:3 â€º Travel Guide Dashboard â€º Trending Now section renders at least 3 cards
âœ… Trending section has 6 cards

[1A[2K[67/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:51:3 â€º Travel Guide Dashboard â€º clicking a city card navigates to city page
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:51:3 â€º Travel Guide Dashboard â€º clicking a city card navigates to city page
âœ… City navigation works

[1A[2K[68/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:66:3 â€º Travel Guide Dashboard â€º city page renders header with city name
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:66:3 â€º Travel Guide Dashboard â€º city page renders header with city name
âœ… City page loaded: Tokyo, Japan

[1A[2K[69/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:85:3 â€º Travel Guide Dashboard â€º city page shows Book buttons when activities exist
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:85:3 â€º Travel Guide Dashboard â€º city page shows Book buttons when activities exist
âœ… City has 1 activities with Book buttons

[1A[2K[70/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:108:3 â€º Travel Guide Dashboard â€º city page handles unknown slug gracefully
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:108:3 â€º Travel Guide Dashboard â€º city page handles unknown slug gracefully
âœ… Unknown city handled gracefully

[1A[2K[71/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:124:3 â€º Travel Guide Dashboard â€º Top Experiences section exists on dashboard
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:124:3 â€º Travel Guide Dashboard â€º Top Experiences section exists on dashboard
âœ… Top Experiences section rendered

[1A[2K[72/72] [chromium] â€º tests/e2e/travelguide.smoke.spec.js:136:3 â€º Travel Guide Dashboard â€º search form exists and can be submitted
[1A[2K[chromium] â€º tests/e2e/travelguide.smoke.spec.js:136:3 â€º Travel Guide Dashboard â€º search form exists and can be submitted
âœ… Search form is functional

[1A[2K  1 failed
    [chromium] â€º tests/e2e/home.carousels.spec.js:25:3 â€º Homepage Carousels â€º shop carousel right arrow scrolls content 
  7 skipped
  64 passed (1.9m)
