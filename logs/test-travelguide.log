
> tradetrends@1.0.0 test
> npm run validate && npm run test:e2e


> tradetrends@1.0.0 validate
> node scripts/validate.js


üîç TradeTrends Build Validation

üìÑ Validating HTML files...

üì¶ Validating data files...
‚úÖ Valid JSON: public/data/amazon.json
‚úÖ Valid JSON: public/data/travel.json
  Found 14 Amazon deals
  Found 2 Travel deals

üé® Validating assets...

‚öôÔ∏è  Validating Netlify config...

‚ö° Validating serverless functions...

üîó Validating affiliate link routing...
‚úÖ Valid _redirects: /go routing enforced with 200! flags
‚úÖ Valid _redirects: /go rules appear BEFORE catch-all /*
‚úÖ Valid render.js: uses direct affiliate URLs with background tracking

üîê Validating admin API routing (Identity bypass)...
‚úÖ public/admin/dashboard.html correctly uses /.netlify/functions/api paths
‚úÖ public/admin/trends.html correctly uses /.netlify/functions/api paths

Validating Direct Affiliate Navigation
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ render.js uses direct affiliate URLs
‚úÖ render.js implements background click tracking
‚úÖ render.js does not use /go in primary navigation

üó∫Ô∏è  Validating sitemap...
‚úÖ sitemap.xml validated

ü§ñ Validating AI memory system...
‚úÖ Valid JSON: .ai/business.json
‚úÖ Valid JSON: .ai/blocked-patterns.json
‚úÖ Valid JSON: .ai/known-good.json
‚úÖ Valid JSON: .ai/history.json
‚úÖ AI memory system validated

9Ô∏è‚É£  Validating API Contracts
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ Analytics API has strict input validation
‚úÖ Analytics API guarantees response contract
‚úÖ Analytics API has error handling
‚úÖ Dashboard has URL parameter sanitation
‚úÖ Dashboard has enhanced error handling
‚úÖ Trends page has error type detection

üîü Validating API Endpoint Routes
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ public/admin/dashboard.html correctly bypasses Identity with direct function calls
‚úÖ public/admin/trends.html correctly bypasses Identity with direct function calls

1Ô∏è‚É£1Ô∏è‚É£  Validating Deal Status Model
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ public/data/amazon.json has valid deal data structure
‚úÖ public/data/travel.json has valid deal data structure
‚úÖ render.js correctly filters published-only deals

Validating /go Function Redirect Safety
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ go.js returns 302 with Location header
‚úÖ go.js implements redirect loop detection
‚úÖ go.js prevents self-redirect loops

üîß Validating admin inline scripts...

üîç Admin Scripts Sanity Check

‚ÑπÔ∏è dashboard.html: Checking 3 inline script(s)...
‚úÖ dashboard.html [script #1] Valid
‚úÖ dashboard.html [script #2] Valid
‚úÖ dashboard.html [script #3] Valid
‚ÑπÔ∏è trends.html: Checking 3 inline script(s)...
‚úÖ trends.html [script #1] Valid
‚úÖ trends.html [script #2] Valid
‚úÖ trends.html [script #3] Valid
‚ÑπÔ∏è deals.html: Checking 2 inline script(s)...
‚úÖ deals.html [script #1] Valid
‚úÖ deals.html [script #2] Valid

üìä Summary
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Errors: 0
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚úÖ All admin scripts are syntactically valid
‚úÖ All admin inline scripts are syntactically valid

Validating Emergency Kill Switch
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ Emergency kill switch flags configured

Validating Deal Data for Self-Redirects (PHASE 8)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ No self-redirect URLs found in deal data

Validating Admin Pages for Scroll Lock Bug
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ No scroll lock bugs detected in admin pages
‚úÖ admin.css: body/html scroll enabled correctly

üìä Validation Summary
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Errors:   0
Warnings: 0
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚úÖ Build validation passed with no issues!

> tradetrends@1.0.0 test:e2e
> playwright test --reporter=line


Running 72 tests using 1 worker

[1A[2K[1/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:16:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard handles uninitialized analytics gracefully
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:16:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard handles uninitialized analytics gracefully
‚úÖ Dashboard handled analytics state without errors

[1A[2K[2/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:56:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard displays empty state when no clicks recorded
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:56:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard displays empty state when no clicks recorded
‚úÖ Dashboard rendered empty/initial state correctly

[1A[2K[3/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:86:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard escapes HTML in deal IDs
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:86:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard escapes HTML in deal IDs
‚úÖ Dashboard properly escapes user data

[1A[2K[4/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:104:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard handles division by zero gracefully
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:104:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard handles division by zero gracefully
‚úÖ Dashboard math calculations are safe

[1A[2K[5/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:132:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ revenue health section loads without errors
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:132:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ revenue health section loads without errors
‚úÖ Revenue health section loaded correctly

[1A[2K[6/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:159:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ analytics API returns valid JSON structure
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:159:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ analytics API returns valid JSON structure
‚úÖ Analytics API returns valid structure

[1A[2K[7/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:195:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard does not get stuck in loading state
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:195:3 ‚Ä∫ Analytics Dashboard - Error Handling ‚Ä∫ dashboard does not get stuck in loading state
‚úÖ Dashboard exited loading state properly

[1A[2K[8/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:218:3 ‚Ä∫ Analytics Dashboard - Console Error Detection ‚Ä∫ no console errors on dashboard load
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:218:3 ‚Ä∫ Analytics Dashboard - Console Error Detection ‚Ä∫ no console errors on dashboard load
‚úÖ No critical console errors detected

[1A[2K[9/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:247:3 ‚Ä∫ Analytics Dashboard - Console Error Detection ‚Ä∫ no JavaScript exceptions thrown
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.analytics-errors.spec.js:247:3 ‚Ä∫ Analytics Dashboard - Console Error Detection ‚Ä∫ no JavaScript exceptions thrown
‚úÖ No JavaScript exceptions thrown

[1A[2K[10/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:16:3 ‚Ä∫ Analytics State Model ‚Ä∫ cold state shows waiting message, not error
[1A[2K[11/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:57:3 ‚Ä∫ Analytics State Model ‚Ä∫ broken state shows offline message
[1A[2K[12/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:78:3 ‚Ä∫ Analytics State Model ‚Ä∫ active state shows analytics with test click button
[1A[2K[13/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:123:3 ‚Ä∫ Analytics State Model ‚Ä∫ Generate Test Click button is clickable
[1A[2K[14/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:186:3 ‚Ä∫ Revenue Health Tests ‚Ä∫ HTTP 302 shows healthy status
[1A[2K[15/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:244:3 ‚Ä∫ Revenue Health Tests ‚Ä∫ HTML response shows redirect loop
[1A[2K[16/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:300:3 ‚Ä∫ Trends Empty State ‚Ä∫ empty trends array shows waiting message, not error
[1A[2K[17/72] [chromium] ‚Ä∫ tests/e2e/admin.analytics-state.spec.js:333:3 ‚Ä∫ Trends Empty State ‚Ä∫ trends fetch failure shows error
[1A[2K[18/72] [chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:13:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin deals page is scrollable
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:13:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin deals page is scrollable
Scroll info: {
  scrollHeight: [33m4227[39m,
  clientHeight: [33m720[39m,
  bodyOverflow: [32m'auto'[39m,
  bodyOverflowY: [32m'auto'[39m,
  htmlOverflow: [32m'auto'[39m,
  htmlOverflowY: [32m'auto'[39m,
  bodyHeight: [32m'720px'[39m,
  htmlHeight: [32m'720px'[39m
}

[1A[2K‚ö†Ô∏è Page appears scrollable but scroll did not move - checking for CSS blockers

[1A[2K‚úÖ Overflow is not hidden - scroll capability preserved

[1A[2K‚úÖ Deals page scroll test passed

[1A[2K[19/72] [chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:80:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin activities page is scrollable
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:80:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin activities page is scrollable
Scroll info: {
  scrollHeight: [33m6683[39m,
  clientHeight: [33m720[39m,
  initialScroll: [33m0[39m,
  bodyOverflow: [32m'auto'[39m,
  bodyOverflowY: [32m'auto'[39m,
  htmlOverflow: [32m'auto'[39m,
  htmlOverflowY: [32m'auto'[39m
}

[1A[2K‚úÖ Activities page scroll test passed

[1A[2K[20/72] [chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:136:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin deals page does not have overflow:hidden on body
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:136:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin deals page does not have overflow:hidden on body
‚úÖ No overflow:hidden on body/html

[1A[2K[21/72] [chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:160:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin activities page does not have overflow:hidden on body
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:160:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Admin activities page does not have overflow:hidden on body
‚úÖ No overflow:hidden on body/html

[1A[2K[22/72] [chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:184:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Save section does not block scrolling
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.scroll.spec.js:184:7 ‚Ä∫ Admin Pages - Scroll Health ‚Ä∫ Save section does not block scrolling
‚úÖ Save section does not block scroll

[1A[2K[23/72] [chromium] ‚Ä∫ tests/e2e/admin.smoke.spec.js:15:3 ‚Ä∫ Admin Pages - Smoke Tests ‚Ä∫ dashboard.html loads and exits loading state
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.smoke.spec.js:15:3 ‚Ä∫ Admin Pages - Smoke Tests ‚Ä∫ dashboard.html loads and exits loading state
‚úÖ Dashboard exited loading state

[1A[2K[24/72] [chromium] ‚Ä∫ tests/e2e/admin.smoke.spec.js:36:3 ‚Ä∫ Admin Pages - Smoke Tests ‚Ä∫ trends.html loads and exits loading state
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.smoke.spec.js:36:3 ‚Ä∫ Admin Pages - Smoke Tests ‚Ä∫ trends.html loads and exits loading state
‚úÖ Trends page exited loading state

[1A[2K[25/72] [chromium] ‚Ä∫ tests/e2e/admin.smoke.spec.js:56:3 ‚Ä∫ Admin Pages - Smoke Tests ‚Ä∫ admin pages return JSON not HTML from API endpoints
[1A[2K[chromium] ‚Ä∫ tests/e2e/admin.smoke.spec.js:56:3 ‚Ä∫ Admin Pages - Smoke Tests ‚Ä∫ admin pages return JSON not HTML from API endpoints
‚úÖ Checked 2 API responses

[1A[2K[26/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:16:3 ‚Ä∫ Card Layout and Button Alignment ‚Ä∫ all cards in shop section have equal heights
[1A[2K[27/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:35:3 ‚Ä∫ Card Layout and Button Alignment ‚Ä∫ all cards in activities section have equal heights
[1A[2K[28/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:54:3 ‚Ä∫ Card Layout and Button Alignment ‚Ä∫ action buttons are aligned at bottom of cards
[1A[2K[29/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:75:3 ‚Ä∫ Card Layout and Button Alignment ‚Ä∫ share buttons are aligned at bottom of cards
[1A[2K[30/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:99:3 ‚Ä∫ Card Interactivity with Hover Tooltip ‚Ä∫ can click primary CTA button when hovering over card
[1A[2K[31/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:123:3 ‚Ä∫ Card Interactivity with Hover Tooltip ‚Ä∫ can click share button when hovering over card
[1A[2K[32/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:150:3 ‚Ä∫ Card Interactivity with Hover Tooltip ‚Ä∫ hover tooltip does not block mouse events
[1A[2K[33/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:190:3 ‚Ä∫ Scroll Bar Spacing ‚Ä∫ scroll bar has 0px gap from section header
[1A[2K[34/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:213:3 ‚Ä∫ Scroll Bar Spacing ‚Ä∫ cards maintain equal height in carousel
[1A[2K[35/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:234:3 ‚Ä∫ Responsive Card Layout ‚Ä∫ cards maintain equal heights on mobile viewport
[1A[2K[36/72] [chromium] ‚Ä∫ tests/e2e/card-layout.spec.js:252:3 ‚Ä∫ Responsive Card Layout ‚Ä∫ cards maintain equal heights on tablet viewport
[1A[2K[37/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:8:3 ‚Ä∫ Homepage Carousels ‚Ä∫ homepage loads and all carousel sections exist
[1A[2K[38/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:25:3 ‚Ä∫ Homepage Carousels ‚Ä∫ shop carousel right arrow scrolls content
[1A[2K[39/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:43:8 ‚Ä∫ Homepage Carousels ‚Ä∫ travel carousel navigation works - section removed from homepage
[1A[2K[40/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:63:3 ‚Ä∫ Homepage Carousels ‚Ä∫ activities carousel navigation works
[1A[2K[41/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:76:3 ‚Ä∫ Homepage Carousels ‚Ä∫ see more links exist and have correct URLs
[1A[2K[42/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:88:3 ‚Ä∫ Homepage Carousels ‚Ä∫ clicking see more shop navigates to full products page
[1A[2K[43/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:94:8 ‚Ä∫ Homepage Carousels ‚Ä∫ clicking see more travel navigates to full travel page - section removed
[1A[2K[44/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:100:3 ‚Ä∫ Homepage Carousels ‚Ä∫ clicking see more activities navigates to full activities page
[1A[2K[45/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:106:8 ‚Ä∫ Homepage Carousels ‚Ä∫ rentals section exists with proper elements - section removed from homepage
[1A[2K[46/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:120:8 ‚Ä∫ Homepage Carousels ‚Ä∫ rentals search button opens external URL with location - section removed
[1A[2K[47/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:148:8 ‚Ä∫ Homepage Carousels ‚Ä∫ rentals search without input shows hint - section removed
[1A[2K[48/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:160:3 ‚Ä∫ Homepage Carousels ‚Ä∫ carousel cards preserve affiliate links
[1A[2K[49/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:174:3 ‚Ä∫ Homepage Carousels ‚Ä∫ carousel cards have share buttons
[1A[2K[50/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:183:3 ‚Ä∫ Homepage Carousels ‚Ä∫ more menu toggle works
[1A[2K[51/72] [chromium] ‚Ä∫ tests/e2e/home.carousels.spec.js:199:3 ‚Ä∫ Homepage Carousels ‚Ä∫ header navigation uses anchor links
[1A[2K[52/72] [chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:15:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ /go endpoint returns 302 with affiliate destination
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:15:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ /go endpoint returns 302 with affiliate destination
‚úÖ /go redirect works: https://amzn.to/49hq7MW

[1A[2K[53/72] [chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:51:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ deals have direct affiliate URL href
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:51:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ deals have direct affiliate URL href
CTA href: https://amzn.to/45NG8rv

[1A[2KTrack URL: /.netlify/functions/api/click?network=amazon&id=64e2e9b3-e975-4f5e-9532-f694f2ba5b47&t=1768337811769

[1A[2K‚úÖ Deal has direct affiliate URL and background tracking

[1A[2K[54/72] [chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:84:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ clicking deal opens affiliate destination directly
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:84:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ clicking deal opens affiliate destination directly
Deal link href: https://amzn.to/45NG8rv

[1A[2K‚úÖ Deal uses direct affiliate URL: https://amzn.to/45NG8rv

[1A[2K[55/72] [chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:105:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ redirect loop detector correctly identifies loops but allows normal clicks
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:105:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ redirect loop detector correctly identifies loops but allows normal clicks
‚úÖ Loop detector does not interfere with normal redirects

[1A[2K[56/72] [chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:173:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ background tracking endpoint exists
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.click.spec.js:173:3 ‚Ä∫ Revenue Canary - /go Redirect Flow ‚Ä∫ background tracking endpoint exists
‚úÖ Background tracking is implemented

[1A[2K[57/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:22:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Amazon affiliate link opens with /go or direct (D7 pattern)
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.spec.js:22:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Amazon affiliate link opens with /go or direct (D7 pattern)
Amazon button href: https://amzn.to/45NG8rv

[1A[2K‚úÖ CTA link structure validated

[1A[2K[58/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:87:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Travel affiliate link opens directly (no redirect loop)
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.spec.js:87:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Travel affiliate link opens directly (no redirect loop)
No travel deals found, skipping test

[1A[2K[59/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:156:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ /go function still works for legacy/shared links
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.spec.js:156:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ /go function still works for legacy/shared links
Legacy /go redirect location: /

[1A[2K[60/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:173:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Homepage has direct affiliate links (not /go redirects)
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.spec.js:173:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Homepage has direct affiliate links (not /go redirects)
Found 12 Amazon links, 0 Travel links

[1A[2K[61/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:200:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Background click tracking endpoint works
[1A[2K[chromium] ‚Ä∫ tests/e2e/revenue.spec.js:200:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Background click tracking endpoint works
Click tracking endpoint returned 204

[1A[2K[62/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:210:3 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Affiliate links do NOT use /?network= pattern (old bug)
[1A[2K[63/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:220:8 ‚Ä∫ Revenue Protection - Affiliate Link Testing ‚Ä∫ Analytics records clicks correctly
[1A[2K[64/72] [chromium] ‚Ä∫ tests/e2e/revenue.spec.js:280:3 ‚Ä∫ Production Deployment Verification ‚Ä∫ Production /go function is live and working
[1A[2K[65/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:16:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ /travelguide loads with no console errors
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:16:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ /travelguide loads with no console errors
‚úÖ Travel guide loaded without errors

[1A[2K[66/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:38:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ Trending Now section renders at least 3 cards
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:38:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ Trending Now section renders at least 3 cards
‚úÖ Trending section has 6 cards

[1A[2K[67/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:51:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ clicking a city card navigates to city page
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:51:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ clicking a city card navigates to city page
‚úÖ City navigation works

[1A[2K[68/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:66:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ city page renders header with city name
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:66:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ city page renders header with city name
‚úÖ City page loaded: Tokyo, Japan

[1A[2K[69/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:85:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ city page shows Book buttons when activities exist
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:85:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ city page shows Book buttons when activities exist
‚úÖ City has 1 activities with Book buttons

[1A[2K[70/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:108:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ city page handles unknown slug gracefully
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:108:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ city page handles unknown slug gracefully
‚úÖ Unknown city handled gracefully

[1A[2K[71/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:124:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ Top Experiences section exists on dashboard
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:124:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ Top Experiences section exists on dashboard
‚úÖ Top Experiences section rendered

[1A[2K[72/72] [chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:136:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ search form exists and can be submitted
[1A[2K[chromium] ‚Ä∫ tests/e2e/travelguide.smoke.spec.js:136:3 ‚Ä∫ Travel Guide Dashboard ‚Ä∫ search form exists and can be submitted
‚úÖ Search form is functional

[1A[2K  7 skipped
  65 passed (1.4m)
